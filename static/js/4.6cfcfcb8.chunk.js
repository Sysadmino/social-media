(this["webpackJsonpsocial-media"]=this["webpackJsonpsocial-media"]||[]).push([[4],{280:function(e,t,n){"use strict";var s=n(2),a=(n(0),n(10)),c=n(16),r=n(1),u=function(e){return{isAuth:e.auth.isAuth}};t.a=function(e){return Object(a.b)(u)((function(t){return t.isAuth?Object(r.jsx)(e,Object(s.a)({},t)):Object(r.jsx)(c.a,{to:"/login"})}))}},281:function(e,t,n){e.exports={"user-container":"chat-page_user-container__27t38",user:"chat-page_user__3iJg0",user__avatar:"chat-page_user__avatar__2WQaf","user__message-block":"chat-page_user__message-block__Vri2l",user__author:"chat-page_user__author__1j-uT"}},284:function(e,t,n){"use strict";n.r(t);var s=n(8),a=n(26),c=n(0),r=n(46),u=n(280),i=n(281),o=n.n(i),l=n(1),j=function(){var e=Object(c.useState)(null),t=Object(a.a)(e,2),n=t[0],s=t[1],u=Object(c.useState)("pending"),i=Object(a.a)(u,2),o=i[0],j=i[1];return Object(c.useEffect)((function(){return null===n||void 0===n||n.addEventListener("open",(function(){j("ready")})),function(){null===n||void 0===n||n.removeEventListener("open",(function(){j("ready")}))}}),[o,n]),Object(c.useEffect)((function(){var e,t=function(){setTimeout((function(){n()}),5e3)};function n(){var n,a;null===(n=e)||void 0===n||n.removeEventListener("close",t),null===(a=e)||void 0===a||a.close(),(e=new WebSocket("wss://social-network.samuraijs.com/handlers/ChatHandler.ashx")).addEventListener("close",t),s(e)}return n(),function(){e.removeEventListener("close",t),e.close()}}),[]),"pending"===o?Object(l.jsx)(r.a,{inBlock:!0,transparent:!0}):Object(l.jsxs)("div",{children:[Object(l.jsx)(d,{ws:n}),Object(l.jsx)(f,{ws:n,readyStatus:o})]})},d=function(e){var t=e.ws,n=Object(c.useState)([]),r=Object(a.a)(n,2),u=r[0],i=r[1],j=Object(c.useRef)(null);return Object(c.useEffect)((function(){var e;null===(e=j.current)||void 0===e||e.scrollIntoView(!1)}),[u]),Object(c.useEffect)((function(){return null===t||void 0===t||t.addEventListener("message",(function(e){i((function(t){return[].concat(Object(s.a)(t),Object(s.a)(JSON.parse(e.data)))}))})),function(){null===t||void 0===t||t.removeEventListener("message",(function(e){i((function(t){return[].concat(Object(s.a)(t),Object(s.a)(JSON.parse(e.data)))}))}))}}),[t]),Object(l.jsx)("div",{className:o.a["user-container"],children:u.map((function(e){return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(b,{message:e},e.userId),Object(l.jsx)("div",{ref:j})]})}))})},b=function(e){var t=e.message;return Object(l.jsxs)("div",{className:o.a.user,children:[Object(l.jsx)("img",{alt:"",src:t.photo,className:o.a.user__avatar}),Object(l.jsxs)("div",{className:o.a["user__message-block"],children:[Object(l.jsx)("div",{className:o.a.user__author,children:t.userName}),Object(l.jsx)("div",{className:o.a.user__message,children:t.message})]})]})},f=function(e){var t=e.ws,n=e.readyStatus,s=Object(c.useState)(""),r=Object(a.a)(s,2),u=r[0],i=r[1];return Object(l.jsxs)("div",{children:[Object(l.jsx)("input",{value:u,onChange:function(e){return i(e.target.value)},type:"text",placeholder:"Enter text message"}),Object(l.jsx)("button",{disabled:null===t||"ready"!==n,onClick:function(){u&&(null===t||void 0===t||t.send(u),i(""))},children:"Send"})]})};t.default=Object(u.a)((function(){return Object(l.jsx)(j,{})}))}}]);
//# sourceMappingURL=4.6cfcfcb8.chunk.js.map